#!/usr/bin/env bash

cd $HOME

echo -n "Enter email for public/private key pair: "
read EMAIL
ssh-keygen -t rsa -C "$EMAIL"

echo -n "Github Login: "
read GITUSER
BODY="{\"title\":\"`whoami`@`hostname` `date`\",\"key\":\"`cat $HOME/.ssh/id_rsa.pub`\"}"
curl -u "$GITUSER" https://api.github.com/user/keys -d "$BODY"

git clone "git@github.com:$GITUSER/dotfiles.git"
cd dotfiles
git submodule init
git submodule update
./make.sh

